{"ast":null,"code":"var _jsxFileName = \"D:\\\\Program Files (x86)\\\\GitHub\\\\MyCardGame\\\\webSocketsPrototype\\\\reack-client\\\\src\\\\components\\\\SearchingPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport SockJS from 'sockjs-client';\nimport { over } from 'stompjs';\nimport GamePage from './GamePage';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar serverURL = 'http://localhost:8082';\nvar stompClient = null;\nvar gameID = \"\";\nconst SearchingPage = () => {\n  _s();\n  const [userName, setUserName] = useState(\"\");\n  const [isConnected, setIsConnected] = useState(false);\n  const [isEnemyFound, setIsEnemyFound] = useState(false);\n  const [points, setPoints] = useState(0);\n  const [enemyPoints, setEnemyPoints] = useState(0);\n  const reduxUserName = useSelector(state => state);\n  const dispatch = useDispatch();\n  const connectToServer = () => {\n    dispatch({\n      type: \"CHANGE_NAME\",\n      payload: userName\n    });\n    let Sock = new SockJS(serverURL + '/ws');\n    stompClient = over(Sock);\n    stompClient.connect({}, onConnected);\n  };\n  const onConnected = () => {\n    setIsConnected(true);\n    stompClient.subscribe('/user/' + userName + '/private', onMessageReceived);\n  };\n  const onMessageReceived = payload => {\n    if (payload.body.includes(\"Found enemy\")) {\n      gameID = payload.body.split(\":\")[1];\n      let message = userName + \":\" + gameID;\n      setIsEnemyFound(true);\n      fetch(serverURL + '/button', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'text/plain'\n        },\n        body: message\n      });\n    } else if (payload.body.includes(\"Get data from server\")) {\n      let enemyName = payload.body.split(\":\")[1];\n      fetch(serverURL + `/button/getPoints/${enemyName}/${gameID}`).then(res => res.json()).then(data => {\n        setEnemyPoints(data);\n      }).catch(console.error);\n    }\n  };\n  const startSearching = () => {\n    stompClient.send('/app/findEnemy', {}, userName);\n  };\n  const increase = () => {\n    let message = userName + \":\" + gameID;\n    fetch(serverURL + '/button', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'text/plain'\n      },\n      body: message\n    });\n    fetch(serverURL + `/button/getPoints/${userName}/${gameID}`).then(res => res.json()).then(data => {\n      setPoints(data);\n    }).catch(console.error);\n    stompClient.send('/app/sendToEnemy', {}, userName);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: isEnemyFound ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(GamePage, {\n        userName: userName,\n        gameID: gameID,\n        serverURL: serverURL\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [!isConnected ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"connect to search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 22\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startSearching,\n        children: \"search for opponent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 52\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: isConnected ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \" \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 23\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"user-name\",\n            placeholder: \"enter user name\",\n            value: userName,\n            name: \"username\",\n            onChange: event => {\n              setUserName(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: connectToServer,\n            children: \"connect to server\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchingPage, \"K4QbG/Rap5/ii2SqwbphNdyLC3w=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = SearchingPage;\nexport default SearchingPage;\nvar _c;\n$RefreshReg$(_c, \"SearchingPage\");","map":{"version":3,"names":["React","useState","SockJS","over","GamePage","useDispatch","useSelector","jsxDEV","_jsxDEV","serverURL","stompClient","gameID","SearchingPage","_s","userName","setUserName","isConnected","setIsConnected","isEnemyFound","setIsEnemyFound","points","setPoints","enemyPoints","setEnemyPoints","reduxUserName","state","dispatch","connectToServer","type","payload","Sock","connect","onConnected","subscribe","onMessageReceived","body","includes","split","message","fetch","method","headers","enemyName","then","res","json","data","catch","console","error","startSearching","send","increase","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","id","placeholder","value","name","onChange","event","target","_c","$RefreshReg$"],"sources":["D:/Program Files (x86)/GitHub/MyCardGame/webSocketsPrototype/reack-client/src/components/SearchingPage.tsx"],"sourcesContent":["import React, {useState} from 'react';\r\nimport SockJS from 'sockjs-client';\r\nimport {over} from 'stompjs';\r\nimport GamePage from './GamePage';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\n\r\n\r\n\r\n\r\ninterface message {\r\n  receiver:string;\r\n  sender:string;\r\n  message:string;\r\n}\r\n\r\n\r\nvar serverURL: string = 'http://localhost:8082';\r\nvar stompClient: any = null;\r\nvar gameID:string= \"\";\r\nconst SearchingPage = () => {\r\n    const [userName, setUserName] = useState<string>(\"\");\r\n    const [isConnected, setIsConnected] = useState<boolean>(false);\r\n    const [isEnemyFound, setIsEnemyFound] = useState<boolean>(false);\r\n    const [points, setPoints] = useState<number>(0);\r\n    const [enemyPoints, setEnemyPoints] = useState<number>(0);\r\n\r\n    const reduxUserName = useSelector<string, string>((state) =>state);\r\n\r\n\r\n    const dispatch = useDispatch();\r\n\r\n\r\n\r\n  const connectToServer= () => {\r\n    dispatch({type:\"CHANGE_NAME\", payload: userName});\r\n    let Sock=new SockJS(serverURL + '/ws');\r\n    stompClient = over(Sock);\r\n    stompClient.connect({}, onConnected);\r\n\r\n  }\r\n  const onConnected = () => {\r\n    setIsConnected(true);\r\n    stompClient.subscribe('/user/' + userName + '/private', onMessageReceived);\r\n\r\n  }\r\n\r\n  const onMessageReceived = (payload:any) => {\r\n\r\n    if(payload.body.includes(\"Found enemy\") ) {\r\n\r\n      gameID = payload.body.split(\":\")[1]; \r\n      let message:string = userName + \":\" + gameID;\r\n      setIsEnemyFound(true);\r\n      fetch(serverURL + '/button', {\r\n        method: 'PUT',\r\n        headers: {'Content-Type': 'text/plain',},\r\n        body: message,\r\n      });\r\n    }\r\n    else if(payload.body.includes(\"Get data from server\")) {\r\n      let enemyName = payload.body.split(\":\")[1]; \r\n      fetch(serverURL + `/button/getPoints/${enemyName}/${gameID}`)\r\n      .then((res) => res.json())\r\n      .then((data:number ) => {\r\n        setEnemyPoints(data);\r\n      }).catch(console.error);\r\n    }\r\n  }\r\n\r\n\r\n  const startSearching = () => {\r\n    stompClient.send('/app/findEnemy', {}, userName);\r\n  }\r\n\r\n  const increase = () => {\r\n\r\n      let message:string = userName + \":\" + gameID;\r\n      fetch(serverURL + '/button', {\r\n        method: 'POST',\r\n        headers: {'Content-Type': 'text/plain',},\r\n        body: message,\r\n      });\r\n      fetch(serverURL + `/button/getPoints/${userName}/${gameID}`)\r\n      .then((res) => res.json())\r\n      .then((data:number ) => {\r\n        setPoints(data);\r\n      }).catch(console.error);\r\n      stompClient.send('/app/sendToEnemy', {}, userName);\r\n\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {isEnemyFound?\r\n      <div>\r\n        <GamePage userName={userName}  gameID={gameID} serverURL={serverURL}></GamePage>\r\n      </div>\r\n      :\r\n      <div>\r\n      {!isConnected? <div>connect to search</div>: <button onClick={startSearching}>search for opponent</button>}\r\n      <div>\r\n        {isConnected? <div> </div>:\r\n        <div>\r\n         <input id='user-name' placeholder='enter user name' value={userName} name='username' onChange={(event:any) => {setUserName(event.target.value)}}/>\r\n         <button onClick={connectToServer}>connect to server</button>\r\n        </div>\r\n        }\r\n      </div>\r\n\r\n      </div>\r\n      }\r\n\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default SearchingPage\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}